{% extends 'admin/dashboard.html' %}
{% load static %}
{% block content %}
    <section class="content">
      <div class="box box-primary">
        <div class="box-header">
          <i class="ion ion-clipboard"></i>
          <h3 class="box-title">Update Product</h3>
        </div>
        <div class="box-body">
            <form action="/manager/products/update/{{ product.id }}/" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="form-group">
                    <label>Product Name:</label>
                    <input type="text" class="form-control" name="product_name" value="{{ product.product_name }}">
                </div>
                <div class="form-group">
                    <label>Description:</label>
                    <textarea class="form-control" name="description" rows="3">{{ product.description }}</textarea>
                </div>
                <div class="form-group">
                    <label>Price ($):</label>
                    <input type="number" class="form-control" name="price" value="{{ product.price }}" step="0.01" min="0">
                </div>
                <div class="form-group">
                    <label>Stock Quantity:</label>  <!-- Added -->
                    <input type="number" class="form-control" name="stock_qty" value="{{ product.stock_qty }}" min="0">  <!-- Added -->
                </div>
                <div class="form-group">
                    <label>Category:</label>
                    <select class="form-control" name="category">
                        {% for category in categories %}
                            <option value="{{ category.id }}" {% if product.category.id == category.id %}selected{% endif %}>
                                {{ category.category_name }}
                            </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label>Current Image:</label>
                    {% if product.image %}
                        <img src="{{ product.image.url }}" alt="{{ product.name }}" style="max-width: 200px; max-height: 200px;">
                    {% else %}
                        <p>No image uploaded</p>
                    {% endif %}
                </div>
                <div class="form-group">
                    <label>Change Image:</label>
                    <input type="file" class="form-control" name="image" accept="image/*">
                </div>
                <a href="/manager/products/" class="btn btn-danger" role="button">
                    <span class="glyphicon glyphicon-chevron-left"></span> Back
                </a>
                <button type="submit" class="btn btn-success">Update</button>
            </form>
        </div>
      </div>
    </section>
{% endblock content %}